% Light & Panel Power
% Plot of light intensity and Solar Panel powewr overlayed on separate axes
% Karl Berger
% 2020.02.27

%%%% ENTER YOUR CHANNEL ID %%%%%
readChannelID = 00000;

% Field definitions
lightFld = 1; % Light Intensity
powerFld = 4; % Panel output power mW

dataDays = 100; % number of days to plot

%% Read Data %%
[data, timeStamps] = thingSpeakRead(readChannelID, 'Fields',[lightFld powerFld], ...
                     'NumPoints', dataDays);
                                                   
% Extract the light intensity from the first column
lux = data(:, 1);
% Extract the solar panel power from the second column
power = data(:, 2);

yyaxis right
plot(timeStamps, lux, 'Linewidth', 2)
ylabel('lux')

yyaxis left
plot(timeStamps, power, 'Linewidth', 2)
ylabel('Milliwatts')

grid on           % grid always tied to left axis
